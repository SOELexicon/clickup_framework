# task_set_status - Set Task Status with Validation

**Task ID:** 86c6e0q0j
**Status:** âœ… Implemented (Enhanced)
**Command:** `cum task_set_status` / `clickup task_set_status`

## Synopsis

```bash
cum task_set_status <task_id> [task_id ...] <status>
```

Set task status with automatic subtask validation. Supports multiple tasks.

## Arguments

| Argument | Type | Required | Description |
|----------|------|----------|-------------|
| `task_ids` | string[] | âœ“ | One or more task IDs or "current" |
| `status` | string | âœ“ | New status (must exist in list workflow) |

## Features

### ğŸ”’ Subtask Validation
- Prevents parent status change if subtasks have different status
- Shows formatted list of mismatched subtasks
- Ensures task hierarchy consistency

### ğŸ“¦ Multi-Task Support
- Update multiple tasks in one command
- Continues on failure, reports summary
- Validates each task independently

## Examples

### Single Task
```bash
cum task_set_status 86c6e0xyz "in development"
```

### Multiple Tasks
```bash
cum task_set_status 86c6e0a 86c6e0b 86c6e0c "Closed"
```

### Validation Failure Example
```bash
$ cum task_set_status 86c6e0q0a "Closed"

âš  Cannot set status to 'Closed' - 3 subtask(s) have different status

Task: Task Management Commands [86c6e0q0a]
Target status: Closed

Subtasks requiring status update:

  1. [86c6e0q0b] task create - Create new tasks
     Current status: Open

  2. [86c6e0q0d] task update - Update existing tasks
     Current status: Open

  3. [86c6e0q0f] task delete - Delete tasks
     Current status: in development

Update these subtasks first, then retry.
```

### Successful Workflow
```bash
# Step 1: Update subtasks first
cum task_set_status 86c6e0q0b 86c6e0q0d 86c6e0q0f "Closed"

# Step 2: Update parent (now succeeds)
cum task_set_status 86c6e0q0a "Closed"
```

## Output

### Success (Single)
```
âœ“ Status updated

Task: API Development [86c6e0xyz]
New status: in development
Subtasks: 5 subtask(s) also have status 'in development'
```

### Success (Multiple)
```
âœ“ Status updated
Task: task create [86c6e0q0b]
New status: Closed

âœ“ Status updated
Task: task delete [86c6e0q0f]
New status: Closed

Summary:
  Updated: 3/3 tasks
```

### Partial Success
```
âš  Cannot set status to 'Closed' for task 'Parent Task' - ...

âœ“ Status updated
Task: Child Task [86c6e0c]
New status: Closed

Summary:
  Updated: 1/2 tasks
  Failed: 1/2 tasks
```

## Validation Rules

### Subtask Check
1. Fetch all tasks in list
2. Find tasks with this task as parent
3. Compare subtask statuses (case-insensitive)
4. If ANY mismatch â†’ abort with error message

### Multiple Tasks
1. Validate each task independently
2. Skip tasks that fail validation
3. Continue with remaining tasks
4. Report summary at end

## API Endpoint

`PUT /task/{task_id}` with subtask validation

## Notes

- Status comparison is case-insensitive
- Fetches all list tasks (may be slow for large lists)
- Tasks without subtasks update immediately
- Bypass validation using `task_update --status`
- Context support via `set_current task <id>`

## Related Commands

- [`task_update`](#86c6e0q0d) - Status updates without validation
- [`task_set_priority`](#86c6e0q0m) - Priority updates
- `hierarchy` - View task hierarchy
- `detail` - View task with subtasks

## Comparison with task_update

| Feature | task_set_status | task_update --status |
|---------|----------------|---------------------|
| Subtask validation | âœ“ Yes | âœ— No |
| Multiple tasks | âœ“ Yes | âœ— No |
| Speed | Slower | Faster |
| Other fields | âœ— Status only | âœ“ All fields |
| Use case | Hierarchy consistency | Quick updates |

## Use Cases

### âœ… Good For
- Marking parent tasks complete
- Ensuring workflow compliance
- Bulk status updates
- Maintaining task hierarchy integrity

### âš ï¸ Not Ideal For
- Tasks without subtasks (use task_update)
- Bypassing validation
- Very large task lists (slow)
- Single-field updates on non-parents

## Error Handling

| Error Type | Behavior |
|-----------|----------|
| Invalid status | API error, exit |
| Task not found | API error, exit |
| Subtask mismatch | Validation error, formatted list, skip task |
| Multiple tasks | Continue on error, report summary |

## Exit Codes

- `0` - All tasks updated successfully
- `1` - One or more tasks failed
