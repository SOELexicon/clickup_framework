javascript:(function(){'use strict';const CONFIG={dryRun:false,updateExisting:true};const TASK_TYPE_DESCRIPTIONS={'task':'Standard development task for implementing features, fixing bugs, or making improvements. Use for general coding work that requires implementation, testing, and review.','coding task':'Complex development work requiring detailed technical specifications, architecture decisions, and implementation. Use for new features, system integrations, or significant code changes.','normal task':'Standard work item for tracking general tasks, assignments, and to-dos. Use for routine work that doesn\'t require specialized categorization.','development':'Active development work including coding, debugging, testing, and integration. Use for all software development activities.','feature':'New functionality or capability being added to the system. Use for user-facing features, API endpoints, or significant enhancements.','bug':'Software defect or unexpected behavior that needs to be fixed. Use for errors, crashes, incorrect behavior, or quality issues.','bug fix':'Addressing software defects with clear reproduction steps, root cause analysis, and verification. Use for fixing errors, crashes, or unexpected behavior.','fix':'Correcting issues, errors, or problems in existing functionality. Use for quick fixes, patches, or minor corrections.','architecture':'System design, architectural decisions, and structural changes. Use for designing new systems, refactoring architecture, or making significant design decisions.','design':'UI/UX design work, wireframes, mockups, and visual design. Use for user interface design, user experience improvements, or design system work.','refactor':'Code restructuring to improve quality, maintainability, or performance without changing functionality. Use for code cleanup, optimization, or restructuring.','documentation':'Creating or updating technical documentation, user guides, API docs, or knowledge base articles. Use for writing, editing, or maintaining documentation.','doc':'Documentation work including writing, editing, or updating docs. Use for technical documentation, user guides, or knowledge base content.','research':'Exploratory work to answer questions, evaluate options, or investigate solutions. Use for feasibility studies, technology evaluation, or problem analysis.','investigation':'Investigating issues, analyzing problems, or researching solutions. Use for debugging complex issues, performance analysis, or root cause investigation.','testing':'Test creation, execution, and quality assurance work. Use for writing tests, running test suites, or QA activities.','test':'Testing activities including unit tests, integration tests, or manual testing. Use for test development, test execution, or quality verification.','qa':'Quality assurance activities including testing, validation, and verification. Use for QA work, test planning, or quality checks.','code review':'Systematic review of code changes for quality, security, and best practices. Use for reviewing pull requests, code audits, or peer reviews.','review':'Reviewing work including code reviews, design reviews, or document reviews. Use for peer review, quality checks, or approval processes.','deployment':'Releasing code to production or other environments. Use for deployments, releases, or environment updates.','devops':'Infrastructure, deployment, and operations work. Use for CI/CD, infrastructure changes, or operational tasks.','infrastructure':'Infrastructure setup, configuration, or changes. Use for server setup, cloud infrastructure, or system configuration.','config':'Configuration changes to systems, applications, or environments. Use for updating settings, environment variables, or configuration files.','configuration':'Modifying system configuration without code changes. Use for settings updates, environment configuration, or system tuning.','database':'Database-related work including schema changes, queries, or data migrations. Use for database design, optimization, or data management.','migration':'Database or data migrations between systems or versions. Use for schema migrations, data migrations, or system upgrades.','data':'Data-related work including data processing, analysis, or management. Use for data pipelines, data analysis, or data quality work.','security':'Security-focused tasks including vulnerability fixes, security audits, or security improvements. Use for security patches, security reviews, or security enhancements.','performance':'Performance optimization work to improve speed, efficiency, or resource usage. Use for performance tuning, optimization, or efficiency improvements.','optimization':'Improving performance, efficiency, or resource usage. Use for code optimization, query optimization, or system tuning.','project':'Project-level container for related work with multiple subtasks and milestones. Use for organizing large initiatives or project planning.','epic':'Large work item that spans multiple iterations or releases. Use for major features or initiatives broken into smaller tasks.','milestone':'Key project checkpoint or deliverable marking significant progress. Use for project milestones, releases, or major achievements.','goal':'Measurable objective with defined success criteria. Use for setting goals, objectives, or targets.','story':'User story or feature story describing functionality from a user perspective. Use for user-facing features or product requirements.','account':'Manage client or customer account details and interactions. Use for account management, customer relations, or account-related work.','client':'Client-related work including communication, requirements, or deliverables. Use for client management, client communications, or client projects.','customer':'Customer-facing work including support, onboarding, or relationship management. Use for customer service, customer success, or customer engagement.','support':'Customer or user support work including troubleshooting, assistance, or issue resolution. Use for support tickets, help desk work, or user assistance.','maintenance':'Routine maintenance work to keep systems running smoothly. Use for regular upkeep, system maintenance, or operational tasks.','chore':'Routine maintenance tasks that don\'t add features but keep the codebase healthy. Use for dependency updates, cleanup, or maintenance work.','cleanup':'Cleaning up code, data, or systems. Use for removing unused code, cleaning up data, or system cleanup.','planning':'Planning work including project planning, sprint planning, or roadmap planning. Use for planning activities, scheduling, or coordination.','analysis':'Analysis work including requirements analysis, data analysis, or system analysis. Use for analyzing requirements, data, or systems.','specification':'Creating specifications, requirements, or technical specifications. Use for writing specs, requirements documents, or technical designs.','meeting':'Meeting-related work including scheduling, preparation, or follow-up. Use for meeting organization, notes, or action items.','communication':'Communication work including emails, messages, or announcements. Use for team communication, stakeholder updates, or notifications.','training':'Training or learning activities including workshops, courses, or knowledge sharing. Use for training sessions, learning activities, or knowledge transfer.','learning':'Learning new skills, technologies, or concepts. Use for skill development, research, or educational activities.'};function generateDescription(taskTypeName){const nameLower=taskTypeName.toLowerCase().trim();if(TASK_TYPE_DESCRIPTIONS[nameLower]){return TASK_TYPE_DESCRIPTIONS[nameLower];}for(const[key,description]of Object.entries(TASK_TYPE_DESCRIPTIONS)){if(nameLower.includes(key)||key.includes(nameLower)){return description;}}if(nameLower.includes('task')||nameLower.includes('work')){return `Standard ${taskTypeName} for tracking work items, assignments, and progress. Use for organizing and managing ${taskTypeName.toLowerCase()} work.`;}if(nameLower.includes('project')||nameLower.includes('initiative')){return `${taskTypeName} container for organizing related work, tasks, and milestones. Use for managing ${taskTypeName.toLowerCase()} scope, timeline, and deliverables.`;}if(nameLower.includes('bug')||nameLower.includes('issue')||nameLower.includes('defect')){return `${taskTypeName} for tracking and resolving issues, defects, or problems. Use for bug reports, issue tracking, or problem resolution.`;}if(nameLower.includes('feature')||nameLower.includes('enhancement')){return `${taskTypeName} for new functionality, capabilities, or improvements. Use for feature development, enhancements, or product improvements.`;}if(nameLower.includes('doc')||nameLower.includes('document')){return `${taskTypeName} for creating, updating, or maintaining documentation. Use for technical docs, user guides, or knowledge base content.`;}return `${taskTypeName} for organizing and tracking work. Use this task type to categorize and manage ${taskTypeName.toLowerCase()} work items.`;}function getWorkspaceId(){const urlMatch=window.location.pathname.match(/\/(\d+)\//);if(urlMatch){return urlMatch[1];}const pageData=window.__INITIAL_STATE__||window.__CLICKUP_DATA__;if(pageData&&pageData.workspaceId){return pageData.workspaceId;}const workspaceId=prompt('Please enter your ClickUp Workspace ID:');if(workspaceId){return workspaceId.trim();}throw new Error('Could not determine workspace ID. Please run this on the ClickUp Task Types settings page.');}function getSessionToken(){const cookies=document.cookie.split(';');for(const cookie of cookies){const[name,value]=cookie.trim().split('=');if(name&&(name.includes('session')||name.includes('token')||name.includes('auth'))){if(value&&value.startsWith('eyJ')){return value;}}}for(let i=0;i<localStorage.length;i++){const key=localStorage.key(i);if(key&&(key.includes('session')||key.includes('token')||key.includes('auth'))){const value=localStorage.getItem(key);if(value&&value.startsWith('eyJ')){return value;}}}const token=prompt('Could not find session token automatically. Please paste your session token (JWT):');if(token){return token.trim().replace(/^Bearer\s+/i,'');}throw new Error('Session token required. Please provide it manually or ensure you are logged into ClickUp.');}async function fetchTaskTypes(workspaceId,sessionToken){try{const response=await fetch(`https://api.clickup.com/api/v2/team/${workspaceId}/custom_item`,{headers:{'Authorization':sessionToken.startsWith('Bearer ')?sessionToken:`Bearer ${sessionToken}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error(`Failed to fetch task types: ${response.status} ${response.statusText}`);}const data=await response.json();return data.custom_items||[];}catch(error){console.error('Error fetching task types:',error);throw error;}}async function updateTaskType(workspaceId,taskTypeId,taskTypeData,sessionToken){const updateData={name:taskTypeData.name,name_plural:taskTypeData.name_plural||taskTypeData.name+'s',description:generateDescription(taskTypeData.name),avatar_source:taskTypeData.avatar_source||'fas',avatar_value:taskTypeData.avatar_value||taskTypeData.icon||'circle'};if(CONFIG.dryRun){console.log(`[DRY RUN] Would update ${taskTypeData.name}:`,updateData.description);return{dryRun:true,...updateData};}try{const response=await fetch(`https://frontdoor-prod-eu-west-1-3.clickup.com/tasks/v1/${workspaceId}/customItem/${taskTypeId}`,{method:'PUT',headers:{'Authorization':`Bearer ${sessionToken}`,'Content-Type':'application/json','Accept':'application/json, text/plain, */*','x-workspace-id':workspaceId},body:JSON.stringify(updateData)});if(!response.ok){const errorText=await response.text();throw new Error(`Failed to update task type: ${response.status} ${response.statusText} - ${errorText}`);}return await response.json();}catch(error){console.error(`Error updating task type ${taskTypeData.name}:`,error);throw error;}}async function main(){console.log('üöÄ Starting Task Type Description Updater...\n');try{console.log('üìã Getting workspace ID...');const workspaceId=getWorkspaceId();console.log(`‚úì Workspace ID: ${workspaceId}\n`);console.log('üîë Getting session token...');const sessionToken=getSessionToken();console.log(`‚úì Session token obtained\n`);console.log('üì• Fetching custom task types...');const taskTypes=await fetchTaskTypes(workspaceId,sessionToken);console.log(`‚úì Found ${taskTypes.length} task type(s)\n`);if(taskTypes.length===0){console.log('‚ÑπÔ∏è No custom task types found.');return;}console.log('üìã Current Task Types:');taskTypes.forEach((tt,index)=>{const hasDesc=tt.description&&tt.description.trim()!=='';console.log(`  ${index+1}. ${tt.name} (ID: ${tt.id})${hasDesc?' - Has description':'- No description'}`);});console.log('');if(CONFIG.dryRun){console.log('üîç DRY RUN MODE - No changes will be made\n');}const results=[];for(const taskType of taskTypes){const hasDescription=taskType.description&&taskType.description.trim()!=='';if(!CONFIG.updateExisting&&hasDescription){console.log(`‚è≠Ô∏è  Skipping ${taskType.name} (already has description)`);results.push({taskType:taskType.name,status:'skipped',reason:'has description'});continue;}try{console.log(`üîÑ Updating ${taskType.name}...`);const result=await updateTaskType(workspaceId,taskType.id,taskType,sessionToken);const newDescription=CONFIG.dryRun?result.description:(result.custom_item?.description||result.description);console.log(`‚úì Updated ${taskType.name}`);console.log(`  Description: ${newDescription.substring(0,80)}...`);results.push({taskType:taskType.name,status:'success',description:newDescription});await new Promise(resolve=>setTimeout(resolve,500));}catch(error){console.error(`‚úó Failed to update ${taskType.name}:`,error.message);results.push({taskType:taskType.name,status:'error',error:error.message});}}console.log('\nüìä Summary:');const successful=results.filter(r=>r.status==='success').length;const skipped=results.filter(r=>r.status==='skipped').length;const errors=results.filter(r=>r.status==='error').length;console.log(`  ‚úì Successfully updated: ${successful}`);console.log(`  ‚è≠Ô∏è  Skipped: ${skipped}`);console.log(`  ‚úó Errors: ${errors}`);if(CONFIG.dryRun){console.log('\nüí° This was a dry run. Set CONFIG.dryRun = false to apply changes.');}else{console.log('\n‚úÖ All task types updated! Refresh the page to see changes.');}}catch(error){console.error('‚ùå Error:',error.message);alert(`Error: ${error.message}\n\nCheck console for details.`);}}main();})();



